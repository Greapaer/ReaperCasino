<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reaper Casino - Ultimate Texas Hold'em</title>
<style>
body {
    margin:0;
    font-family:"Segoe UI",Arial,sans-serif;
    background: linear-gradient(135deg,#0b0c10,#1f2833);
    color:white;
}
header {
    padding:15px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px;
}
.navLinks {
    display:flex;
    flex-direction:column;
    gap:6px;
}
.navLinks a {
    display:block;
    padding:6px 12px;
    border-radius:8px;
    background:#555;
    color:white;
    text-decoration:none;
    font-weight:bold;
    text-align:center;
    font-size:2em;
    transition:0.2s;
}
.navLinks a:hover { background:#777; }
.balanceDisplay {
    padding:6px 12px;
    border-radius:10px;
    background: rgba(255,255,255,0.15);
    color:white;
    font-weight:bold;
    font-size:1.2em;
    text-align:center;
}
#addFundsBtn {
    position:fixed;
    right:15px;
    bottom:15px;
    padding:10px 20px;
    border:none;
    border-radius:10px;
    background:#28a745;
    color:white;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 3px 10px rgba(0,0,0,0.4);
    transition:0.2s;
}
#addFundsBtn:hover { background:#1e7e34; }

.container {
    max-width:800px;
    margin:0px auto 30px auto;
    background: rgba(0,0,0,0.5);
    padding:20px;
    border-radius:15px;
    box-shadow:0 5px 15px rgba(0,0,0,0.6);
    text-align:center;
}
button {
    font-size:1em;
    padding:10px;
    border-radius:10px;
    border:none;
    margin:5px;
    cursor:pointer;
    background:#555;
    color:white;
    font-weight:bold;
    transition:0.2s;
    box-shadow:0 3px 10px rgba(0,0,0,0.4);
}
button:hover { background:#777; }

#playerWinText, #playerComboText, #botComboText {
    margin-top:10px;
    font-size:1.2em;
    font-weight:bold;
}

.cardsContainer {
    display: flex;
    flex-direction: row;      /* –≤—Å–µ–≥–¥–∞ –≤ —Å—Ç—Ä–æ–∫—É */
    justify-content: center;
    align-items: center;
    gap: 12px;

    flex-wrap: nowrap;        /* –∑–∞–ø—Ä–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ */
    overflow-x: auto;         /* –µ—Å–ª–∏ –Ω–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è ‚Äî –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–∫—Ä–æ–ª–ª */
    padding: 10px 0;
}

.card.highlight {
    box-shadow:
        0 0 15px 5px #ffeb3b, /* –∂–µ–ª—Ç—ã–π —Å–≤–µ—Ç */
        0 0 30px 10px rgba(255,235,59,0.4);
    transition: box-shadow 0.5s ease;
    animation: highlightGlow 1s infinite alternate;
}

.card {
    width: 70px;
    height: 105px;
    perspective: 1000px;
    border-radius: 12px;
    font-size: 18px;
    position: relative;
    background: linear-gradient(145deg,#ffffff,#e6e6e6);
    box-shadow:
        0 10px 25px rgba(0,0,0,0.5),
        inset 0 2px 4px rgba(255,255,255,0.8),
        inset 0 -3px 6px rgba(0,0,0,0.15);
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    transform-style: preserve-3d;
    cursor: pointer;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    opacity: 0;
}
@keyframes cardEnter {
    0% { transform: translateY(-50px) rotateY(0deg) scale(0.5); opacity: 0; }
    50% { transform: translateY(0px) rotateY(10deg) scale(1.1); opacity: 1; }
    100% { transform: translateY(0px) rotateY(0deg) scale(1); opacity: 1; }
}
@keyframes highlightGlow {
    0% { box-shadow: 0 0 15px 5px #ffeb3b, 0 0 30px 10px rgba(255,235,59,0.4); transform: scale(1.05);}
    100% { box-shadow: 0 0 25px 10px #ffeb3b, 0 0 40px 20px rgba(255,235,59,0.6); transform: scale(1.1);}
}

.card:hover {
    transform: rotateY(10deg) rotateX(5deg) scale(1.08);
    box-shadow:
        0 20px 40px rgba(0,0,0,0.6),
        0 0 20px rgba(255,75,43,0.5);
}

/* –ö—Ä–∞—Å–Ω—ã–µ –º–∞—Å—Ç–∏ */
.card.red {
    color: #e53935;
}

/* –¶–≤–µ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏–π */
.win { color: #28a745 !important; transition: color 0.5s ease; }
.lose { color: #e53935 !important; transition: color 0.5s ease; }
.tie { color: #f39c12 !important; transition: color 0.5s ease; }

/* –ß—ë—Ä–Ω—ã–µ –º–∞—Å—Ç–∏ */
.card.black {
    color: #111;
}

/* –£–≥–ª—ã */
.card .corner {
    position: absolute;
    font-size: 14px;
    line-height: 1;
    text-align: center;
}

.card .top-left {
    top: 8px;
    left: 8px;
}

.card .bottom-right {
    bottom: 8px;
    right: 8px;
    transform: rotate(180deg);
}

/* –¶–µ–Ω—Ç—Ä */
.card .center {
    font-size: 42px;
}

/* –†—É–±–∞—à–∫–∞ –∫–∞—Ä—Ç—ã */
.card.back {
    background: linear-gradient(145deg,#1f2833,#0b0c10);
    color: #ff4b2b;
    box-shadow:
        0 10px 25px rgba(0,0,0,0.7),
        inset 0 0 20px rgba(255,75,43,0.3);
}

.card.back::before {
    content: "‚ô†";
    font-size: 50px;
    opacity: 0.8;
}
/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ –∫–∞—Ä—Ç—ã */
.card.flip {
    transform: rotateY(180deg);
    transition: transform 0.6s ease;
}
.welcome {
    text-align:center;
    font-size:48px;
    font-weight:bold;
    color:#ff4b2b;
    text-shadow: 2px 2px 15px rgba(255,75,43,0.6), 0 0 20px rgba(255,75,43,0.4);
}
.welcome span {
    color:#ffb347;
    text-shadow: 2px 2px 20px rgba(255,179,71,0.5);
}

.navBalanceWrapper {
    display:flex;
    width:100%;
    justify-content:space-between;
    align-items:flex-start;
    flex-wrap:wrap;
}

#actionButtons button {
    min-width:100px;
}

@media screen and (max-width:768px){
    .container { width:90%; padding:15px; }
    input, button { font-size:0.9em; padding:8px; }
    .balanceDisplay { font-size:1em; padding:5px 10px; }
    .navLinks a { padding:5px 10px; font-size:1.2em; }
    .welcome { font-size:36px; }
    .card .center {font-size: 20px;}
}
@media screen and (max-width:480px){
    input, button { font-size:0.8em; padding:6px; }
    .balanceDisplay { font-size:0.9em; padding:4px 8px; }
    .navLinks a { padding:4px 8px; font-size:1em; }
    .welcome { font-size:28px; }
    .card { width:50px; height:75px; font-size:16px; }
    .card .center {font-size: 20px;}
}

input[type="number"] {
    font-size:1em;
    padding:12px 15px;
    border-radius:12px;
    border:2px solid #555;
    background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
    color:white;
    text-align:center;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5),
                inset 0 1px 2px rgba(255,255,255,0.05);
    transition: 0.3s;
    outline:none;
}
input[type="number"]:hover {
    border-color: #ff4b2b;
    box-shadow: 0 4px 15px rgba(255,75,43,0.4),
                inset 0 1px 2px rgba(255,255,255,0.1);
}
input[type="number"]:focus {
    border-color: #ffb347;
    box-shadow: 0 0 12px rgba(255,179,71,0.7),
                inset 0 1px 2px rgba(255,255,255,0.2);
    background: linear-gradient(145deg, #2c2c2c, #121212);
}

/* --- –ù–æ–≤—ã–π –º–∞–∫–µ—Ç: –∏–≥—Ä–∞ –∏ –±–æ–Ω—É—Å—ã —Å–≤–µ—Ä—Ö—É, –ø—Ä–∞–≤–∏–ª–∞ —Å–Ω–∏–∑—É --- */
.topWrapper {
  display:flex;
  gap:20px;
  justify-content:flex-start;
  align-items:flex-start;
  flex-wrap:nowrap;
  width:100%;
}
.card.flip {
    transform: rotateY(180deg);
    transition: transform 0.6s ease;
}
.gameWrapper {
  flex:1 1 500px;
  background: rgba(0,0,0,0.5);
  padding: 15px;
  border-radius:15px;
  box-shadow:0 5px 15px rgba(0,0,0,0.6);
}

.bonusWrapper {
  flex:0 0 300px;
  display:flex;
  flex-direction:column;
  gap:15px;
  overflow:visible;
}

.rulesWrapper {
  margin-top:20px;
  background: rgba(255,255,255,0.05);
  padding: 15px 20px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.4);
}

.rulesWrapper h2 { color: #ffb347; margin-bottom:10px; }
.rulesWrapper ul { list-style: disc; padding-left:20px; }
.rulesWrapper li { color:white; margin-bottom:6px; }

.bonusTable {
    flex:1;
    min-width:220px;
    background: rgba(255,255,255,0.05);
    border-radius:12px;
    padding:10px;
    margin:10px 0;
    box-shadow:0 4px 10px rgba(0,0,0,0.3);
}

.bonusTable h3 {
    text-align:center;
    margin-bottom:10px;
    font-size:1.2em;
    color:#ffb347;
    text-shadow:1px 1px 5px rgba(255,179,71,0.5);
}

.bonusTable table {
    width:100%;
    border-collapse:collapse;
}

.bonusTable th,
.bonusTable td {
    border:1px solid rgba(255,255,255,0.2);
    padding:8px;
    text-align:center;
    font-weight:bold;
    color:white;
}

.bonusTable th {
    background: rgba(255,255,255,0.1);
}

@media screen and (max-width:768px){
    .topWrapper { flex-direction:column; }
    .bonusWrapper { max-width:100%; margin-top:20px; }
}
#playerComboText, #botComboText {
    font-weight: bold;
    font-size: 1.5em;
    text-align: center;
    margin-top: 15px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.bottomBalance {
    margin-top: 20px;
    font-size: 1.3em;
    background: linear-gradient(145deg,#1f2833,#0b0c10);
    box-shadow: 0 5px 15px rgba(0,0,0,0.6);
}

</style>
</head>
<body>
<header>
    <div class="welcome">Reaper<span> Casino</span></div>
    <div class="navBalanceWrapper">
        <div class="navLinks">
            <a href="blackjack.html">üÇ° Blackjack</a>
            <a href="roulette.html">üé° –†—É–ª–µ—Ç–∫–∞</a>
            <a href="index.html">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        </div>
        <div class="balanceDisplay">–ë–∞–ª–∞–Ω—Å: <span id="uthBalance">10000</span></div>
    </div>
</header>

<!-- –í–µ—Å—å –≤–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫: –∏–≥—Ä–∞ + –±–æ–Ω—É—Å—ã -->
<div class="topWrapper">
  <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å ‚Äî –∏–≥—Ä–∞ -->
  <div class="gameWrapper">
    <div>
      <input type="number" id="bbBet" placeholder="BB –°—Ç–∞–≤–∫–∞">
      <input type="number" id="anteBet" placeholder="Ante –°—Ç–∞–≤–∫–∞">
      <input type="number" id="tripsBet" placeholder="TRIPS –°—Ç–∞–≤–∫–∞">
      <input type="number" id="ultimateBet" placeholder="Ultimate –°—Ç–∞–≤–∫–∞">
      <button id="startBtn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
    </div>

    <div class="cardsSection">
      <h3>–í–∞—à–∏ –∫–∞—Ä—Ç—ã</h3>
      <div class="cardsContainer" id="playerCards"></div>
      <p id="playerComboText"></p>
    </div>

    <div class="cardsSection">
      <h3>–ö–∞—Ä—Ç—ã –±–æ—Ç–∞</h3>
      <div class="cardsContainer" id="botCards"></div>
      <p id="botComboText"></p>
    </div>

    <div class="cardsSection">
      <h3>–ö–∞—Ä—Ç—ã –Ω–∞ —Å—Ç–æ–ª–µ</h3>
      <div class="cardsContainer" id="tableCards"></div>
    </div>

    <div id="actionButtons"></div>
    <p id="playerWinText"></p>
    <div class="balanceDisplay bottomBalance">
    –ë–∞–ª–∞–Ω—Å: <span id="uthBalanceBottom">10000</span>
</div>

  </div>

  <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ ‚Äî –±–æ–Ω—É—Å—ã -->
  <div class="bonusWrapper">
    <div class="bonusTable">
        <h3>BB / TRIPS Bonus</h3>
        <table>
            <tr><th>–ö–æ–º–±–∏–Ω–∞—Ü–∏—è</th><th>BB</th><th>TRIPS</th></tr>
            <tr><td>–ù–∏–∂–µ</td><td>Push</td><td>3x</td></tr>
            <tr><td>–°—Ç—Ä–∏—Ç</td><td>1x</td><td>5x</td></tr>
            <tr><td>–§–ª–µ—à</td><td>1.5x</td><td>7x</td></tr>
            <tr><td>–§—É–ª–ª-—Ö–∞—É—Å</td><td>3x</td><td>10x</td></tr>
            <tr><td>–ö–∞—Ä–µ</td><td>10x</td><td>25x</td></tr>
            <tr><td>–°—Ç—Ä–∏—Ç-—Ñ–ª–µ—à</td><td>50x</td><td>40x</td></tr>
            <tr><td>–†–æ—è–ª-—Ñ–ª–µ—à</td><td>500x</td><td>70x</td></tr>
        </table>
    </div>

    <div class="bonusTable">
        <h3>Ultimate Bonus</h3>
        <table>
            <tr><th>–ö–æ–º–±–∏–Ω–∞—Ü–∏—è</th><th>–í—ã–ø–ª–∞—Ç–∞</th></tr>
            <tr><td>AA</td><td>30x</td></tr>
            <tr><td>AK –æ–¥–Ω–æ–º–∞—Å—Ç–Ω—ã–µ</td><td>25x</td></tr>
            <tr><td>AQ –æ–¥–Ω–æ–º–∞—Å—Ç–Ω—ã–µ</td><td>20x</td></tr>
            <tr><td>AJ –æ–¥–Ω–æ–º–∞—Å—Ç–Ω—ã–µ</td><td>15x</td></tr>
            <tr><td>KK –∏–ª–∏ QQ –∏–ª–∏ JJ</td><td>15x</td></tr>
            <tr><td>AK —Ä–∞–∑–Ω–æ–º–∞—Å—Ç–Ω—ã–µ</td><td>10x</td></tr>
            <tr><td>AQ —Ä–∞–∑–Ω–æ–º–∞—Å—Ç–Ω—ã–µ</td><td>5x</td></tr>
            <tr><td>AJ —Ä–∞–∑–Ω–æ–º–∞—Å—Ç–Ω—ã–µ</td><td>2x</td></tr>
        </table>
    </div>
  </div>
</div>

<!-- –ü—Ä–∞–≤–∏–ª–∞ ‚Äî —Å–Ω–∏–∑—É -->
<div class="rulesWrapper">
  <h2>–ü—Ä–∞–≤–∏–ª–∞ Ultimate Texas Hold'em</h2>
  <ul>
    <li>–°—Ç–∞–≤–∫–∏ BB –∏ Ante –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–≤–Ω—ã.</li>
    <li>–ù–∞ –ø—Ä–µ—Ñ–ª–æ–ø–µ –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å 4x –∏–ª–∏ —á–µ–∫.</li>
    <li>–ù–∞ —Ñ–ª–æ–ø–µ –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å 2x –∏–ª–∏ —á–µ–∫.</li>
    <li>–ù–∞ —Ç–µ—Ä–Ω–µ –∏ —Ä–∏–≤–µ—Ä–µ –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å 1x –∏–ª–∏ —Å–∫–∏–Ω—É—Ç—å –∫–∞—Ä—Ç—ã.</li>
    <li>–í—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –∏–≥—Ä–æ–∫ —Å –ª—É—á—à–µ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π –ø–æ –ø–æ–∫–µ—Ä–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.</li>
    <li>–ï—Å–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ä–∞–≤–Ω—ã, —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä—à–∞—è –∫–∞—Ä—Ç–∞ (–∫–∏–∫–µ—Ä).</li>
    <li>–ö–∞–∂–¥–∞—è –∏–≥—Ä–∞ –∏–º–µ–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é —Å—Ç–∞–≤–∫—É 50, –µ—Å–ª–∏ –Ω–∞ —Ñ–ª–æ–ø–µ —É –≤–∞—Å –§—É–ª–ª-—Ö–∞—É—Å, —Ç–æ –∑–∞ —ç—Ç–æ –≤–∞–º –ø–ª–∞—Ç—è—Ç 300, –∑–∞ –∫–∞—Ä–µ 500, –∑–∞ –°—Ç—Ä–∏—Ç-—Ñ–ª–µ—à 3000, –∑–∞ –†–æ—è–ª-—Ñ–ª–µ—à 15000</li>
  </ul>
</div>

<button id="addFundsBtn">+10000</button>
<script>
let totalBalance = 10000;

document.getElementById("addFundsBtn").onclick = () => {
    totalBalance += 10000;
    updateBalance();
};

function updateBalance() {
    document.getElementById("uthBalance").innerText = totalBalance;
    document.getElementById("uthBalanceBottom").innerText = totalBalance;
}

updateBalance();

// ===== UTH SCRIPT START =====
let deck=[], player=[], bot=[], table=[];
let bbBet=0, anteBet=0, tripsBet=0, ultimateBet=0;
let stage="", currentPlayBet=0;
const pokerSuits=["‚ô†","‚ô•","‚ô¶","‚ô£"];
const pokerRanks=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];
const flopBonusBet = 50; // –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞

document.getElementById("startBtn").onclick=startPoker;

function createDeck(){
    let d=[];
    for(let s of pokerSuits) for(let r of pokerRanks) d.push(r+s);
    return d.sort(()=>Math.random()-0.5);
}

function deal(n){
    return deck.splice(0,n);
}

// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞—Ä—Ç—ã –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —Å –ø—Ä–µ–∂–Ω–∏–º –¥–∏–∑–∞–π–Ω–æ–º
function displayCards(id, cards, highlightIndices=[]) {
    const container = document.getElementById(id);
    container.innerHTML = "";

    cards.forEach((card, index) => {
        const div = document.createElement("div");
        div.classList.add("card");

        if(card === "üÇ†"){
            div.classList.add("back");
            container.appendChild(div);
            div.style.opacity = 1;
            return;
        }

        const rank = card.slice(0, -1);
        const suit = card.slice(-1);

        if(suit === "‚ô•" || suit === "‚ô¶"){
            div.classList.add("red");
        } else {
            div.classList.add("black");
        }

        div.innerHTML = `
            <div class="corner top-left">${rank}<br>${suit}</div>
            <div class="center">${suit}</div>
            <div class="corner bottom-right">${rank}<br>${suit}</div>
        `;

        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
        if(highlightIndices.includes(index)){
            div.classList.add("highlight");
        }

        container.appendChild(div);

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è ‚Äú–∂–∏–≤–æ–≥–æ‚Äù —ç—Ñ—Ñ–µ–∫—Ç–∞
        setTimeout(() => {
            div.style.opacity = 1;
            div.style.animation = "cardEnter 0.5s ease forwards";
        }, index * 150); // –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏
    });
}

function revealBotCombo() {
    const botEval = evaluateHand(bot.concat(table));
    const botComboEl = document.getElementById("botComboText");
    botComboEl.innerText = botEval.name;
    botComboEl.className = "win"; // –∏–ª–∏ –ø–æ –≤–∞—à–µ–º—É –∂–µ–ª–∞–Ω–∏—é: win/lose/tie
    botComboEl.style.transition = "color 0.5s ease";
}


function evaluateHand(cards){

    const values = cards.map(c => pokerRanks.indexOf(c.slice(0,-1))).sort((a,b)=>b-a);
    const suits = cards.map(c => c.slice(-1));

    const counts = {};
    values.forEach(v => counts[v] = (counts[v] || 0) + 1);

    const pairs = Object.keys(counts).filter(k => counts[k]===2).map(Number).sort((a,b)=>b-a);
    const three = Object.keys(counts).filter(k => counts[k]===3).map(Number);
    const four = Object.keys(counts).filter(k => counts[k]===4).map(Number);

    const flushSuit = suits.find(s => suits.filter(x=>x===s).length >=5);
    const flushCards = flushSuit ? cards.filter(c=>c.slice(-1)===flushSuit) : [];

    const unique = [...new Set(values)].sort((a,b)=>b-a);

    function getStraight(vals){
        for(let i=0;i<=vals.length-5;i++){
            if(vals[i]-vals[i+4]===4) return vals[i];
        }
        if(vals.includes(12) && vals.includes(3) && vals.includes(2) && vals.includes(1) && vals.includes(0)){
            return 3; // 5-high straight (A-2-3-4-5)
        }
        return null;
    }

    const straightHigh = getStraight(unique);

    let straightFlushHigh = null;
    if(flushSuit){
        const flushValues = [...new Set(flushCards.map(c=>pokerRanks.indexOf(c.slice(0,-1))))].sort((a,b)=>b-a);
        straightFlushHigh = getStraight(flushValues);
    }

    // ===== ROYAL FLUSH =====
    if(straightFlushHigh === 12){
        return {score:9, name:"–†–æ—è–ª-—Ñ–ª–µ—à", ranks:[12]};
    }

    // ===== STRAIGHT FLUSH =====
    if(straightFlushHigh !== null){
        return {score:8, name:"–°—Ç—Ä–∏—Ç-—Ñ–ª–µ—à", ranks:[straightFlushHigh]};
    }

    // ===== FOUR =====
    if(four.length){
        return {
            score:7,
            name:"–ö–∞—Ä–µ",
            ranks:[four[0], ...values.filter(v=>v!==four[0])]
        };
    }

    // ===== FULL HOUSE =====
    if(three.length && pairs.length){
        return {
            score:6,
            name:"–§—É–ª–ª-—Ö–∞—É—Å",
            ranks:[three[0], pairs[0]]
        };
    }

    // ===== FLUSH =====
    if(flushSuit){
        const flushValues = flushCards.map(c=>pokerRanks.indexOf(c.slice(0,-1))).sort((a,b)=>b-a);
        return {score:5, name:"–§–ª–µ—à", ranks:flushValues};
    }

    // ===== STRAIGHT =====
    if(straightHigh !== null){
        return {score:4, name:"–°—Ç—Ä–∏—Ç", ranks:[straightHigh]};
    }

    // ===== THREE =====
    if(three.length){
        return {
            score:3,
            name:"–°–µ—Ç",
            ranks:[three[0], ...values.filter(v=>v!==three[0])]
        };
    }

    // ===== TWO PAIR =====
    if(pairs.length>=2){
        return {
            score:2,
            name:"–î–≤–µ –ø–∞—Ä—ã",
            ranks:[pairs[0], pairs[1], ...values.filter(v=>v!==pairs[0] && v!==pairs[1])]
        };
    }

    // ===== ONE PAIR =====
    if(pairs.length===1){
        return {
            score:1,
            name:"–ü–∞—Ä–∞",
            ranks:[pairs[0], ...values.filter(v=>v!==pairs[0])]
        };
    }

    return {score:0, name:"–°—Ç–∞—Ä—à–∞—è –∫–∞—Ä—Ç–∞", ranks:values};
}

function compareHands(playerEval, botEval) {
    if (playerEval.score > botEval.score) return 1;
    if (playerEval.score < botEval.score) return -1;
    for (let i = 0; i < playerEval.ranks.length; i++) {
        if (playerEval.ranks[i] > botEval.ranks[i]) return 1;
        if (playerEval.ranks[i] < botEval.ranks[i]) return -1;
    }
    return 0;
}

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∏–≥—Ä–æ–∫–∞ –Ω–∞ —Ñ–ª–æ–ø–µ/—Ç–µ—Ä–Ω–µ/—Ä–∏–≤–µ—Ä–µ
function showCurrentPlayerCombo() {
    const visibleCards = [...player];
    if(stage === "flop") visibleCards.push(...table.slice(0,3));
    else if(stage === "turn" || stage === "river" || stage === "showdown") visibleCards.push(...table);

    const currentEval = evaluateHand(visibleCards);
    const playerComboEl = document.getElementById("playerComboText");
    playerComboEl.innerText = currentEval.name;
    playerComboEl.style.color = "white"; // –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –±–µ–ª–æ–µ
}

function startPoker(){
    document.getElementById("playerWinText").innerText="";
    document.getElementById("playerComboText").innerText="";
    document.getElementById("botComboText").innerText="";
    document.getElementById("actionButtons").innerHTML="";
    
    bbBet = parseInt(document.getElementById("bbBet").value);
    anteBet = parseInt(document.getElementById("anteBet").value);
    tripsBet = parseInt(document.getElementById("tripsBet").value) || 0;
    ultimateBet = parseInt(document.getElementById("ultimateBet").value) || 0;

    if(bbBet !== anteBet){ alert("BB –∏ Ante –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–≤–Ω—ã"); return; }
    if(bbBet + anteBet + tripsBet + ultimateBet + flopBonusBet > totalBalance){ alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤"); return; }

    // –°–Ω–∏–º–∞–µ–º –≤—Å–µ —Å—Ç–∞–≤–∫–∏ —Å—Ä–∞–∑—É
    totalBalance -= (bbBet + anteBet + tripsBet + ultimateBet + flopBonusBet);
    updateBalance();

    deck = createDeck();
    player = deal(2);
    bot = deal(2);
    table = deal(5);

    displayCards("playerCards", player);
    displayCards("botCards", ["üÇ†","üÇ†"]);
    displayCards("tableCards", []);

    stage = "preflop";
    currentPlayBet = 0;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–∞ –Ω–∞ —Ñ–ª–æ–ø–µ –±—É–¥–µ—Ç –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ –ø–µ—Ä–≤—ã—Ö 3 –∫–∞—Ä—Ç
    showButtons("–ü—Ä–µ—Ñ–ª–æ–ø: 4x –∏–ª–∏ —á–µ–∫", 4);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–∞ –Ω–∞ —Ñ–ª–æ–ø–µ
function checkFlopBonus(){
    const flopCards = player.concat(table.slice(0,3));
    const evalFlop = evaluateHand(flopCards);
    let bonus = 0;
    switch(evalFlop.name){
        case "–§—É–ª–ª-—Ö–∞—É—Å": bonus = 300; break;
        case "–ö–∞—Ä–µ": bonus = 500; break;
        case "–°—Ç—Ä–∏—Ç-—Ñ–ª–µ—à": bonus = 3000; break;
        case "–†–æ—è–ª-—Ñ–ª–µ—à": bonus = 15000; break;
    }
    if(bonus > 0){
        totalBalance += bonus;
        updateBalance();
        alert(`üéâ –§–ª–æ–ø-–±–æ–Ω—É—Å! –ö–æ–º–±–∏–Ω–∞—Ü–∏—è: ${evalFlop.name}, –≤—ã–ø–ª–∞—Ç–∞: ${bonus}`);
    }
}

// –í showButtons –Ω–∞ —Ñ–ª–æ–ø–µ –¥–æ–±–∞–≤–ª—è–µ–º –≤—ã–∑–æ–≤ –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ –∫–∞—Ä—Ç:
if(stage==="flop"){
    displayCards("tableCards", table.slice(0,3));
    showCurrentPlayerCombo();
    checkFlopBonus(); // –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–∞ –ø–æ—Å–ª–µ —Ñ–ª–æ–ø–∞
    showButtons("–§–ª–æ–ø: —Å—Ç–∞–≤–∫–∞ 2x –∏–ª–∏ —á–µ–∫",2,false,true);
}


function showButtons(text,mult,allowFold=false,showCheck=true){
    const div=document.getElementById("actionButtons");
    div.innerHTML=`<p>${text}</p>`;
    if(mult>0){const btn=document.createElement("button");btn.innerText=`–°—Ç–∞–≤–∫–∞ ${mult}x`;btn.onclick=()=>playerMove(mult);div.appendChild(btn);}
    if(showCheck){const btn=document.createElement("button");btn.innerText="–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å";btn.onclick=()=>playerMove(0);div.appendChild(btn);}
    if(allowFold){const btn=document.createElement("button");btn.innerText="–°–∫–∏–Ω—É—Ç—å –∫–∞—Ä—Ç—ã";btn.onclick=()=>foldPoker();div.appendChild(btn);}
}

function playerMove(mult){
    if(mult>0){let stake=bbBet*mult;if(stake>totalBalance){alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤"); return;} totalBalance-=stake; updateBalance(); currentPlayBet+=stake;}
    
    if(stage==="preflop"){
        if(mult===4){ stage="showdown"; displayCards("tableCards",table); finishPoker(); return; }
        stage="flop"; 
        displayCards("tableCards", table.slice(0,3)); 
        showButtons("–§–ª–æ–ø: —Å—Ç–∞–≤–∫–∞ 2x –∏–ª–∏ —á–µ–∫",2,false,true);
        showCurrentPlayerCombo();
    }
    else if(stage==="flop"){
        if(mult===2){ stage="showdown"; displayCards("tableCards",table); finishPoker(); return; }
        stage="turn"; 
        displayCards("tableCards",table);
        showButtons("–¢–µ—Ä–Ω –∏ –†–∏–≤–µ—Ä: —Å—Ç–∞–≤–∫–∞ 1x –∏–ª–∏ —Å–∫–∏–Ω—É—Ç—å –∫–∞—Ä—Ç—ã",1,true,false);
        showCurrentPlayerCombo();
    }
    else if(stage==="turn"){
        stage="showdown";
        displayCards("tableCards",table);
        showCurrentPlayerCombo();
        finishPoker();
    }
}

function foldPoker() {
    displayCards("botCards", bot);
    revealBotCombo(); // <-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –±–æ—Ç–∞ —Å—Ä–∞–∑—É
    const winText = document.getElementById("playerWinText");
    winText.style.color = "red";
    winText.innerText = "üò¢ –í—ã —Å–∫–∏–Ω—É–ª–∏ –∫–∞—Ä—Ç—ã. –°—Ç–∞–≤–∫–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã.";
    document.getElementById("actionButtons").innerHTML = "";
    const div = document.getElementById("actionButtons");
    const btnRestart = document.createElement("button");
    btnRestart.innerText = "–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É";
    btnRestart.onclick = startPoker;
    div.appendChild(btnRestart);
}

function finishPoker() {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç—ã –±–æ—Ç–∞
    displayCards("botCards", bot);

    // –û—Ü–µ–Ω–∏–≤–∞–µ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
    const playerEval = evaluateHand(player.concat(table));
    const botEval = evaluateHand(bot.concat(table));

    const cmp = compareHands(playerEval, botEval);
    const playerWins = cmp === 1;
    const tie = cmp === 0;

    const playerComboEl = document.getElementById("playerComboText");
    const botComboEl = document.getElementById("botComboText");

    playerComboEl.innerText = playerEval.name;
    botComboEl.innerText = botEval.name;

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∫–ª–∞—Å—Å—ã
    playerComboEl.className = "";
    botComboEl.className = "";

    // –û–∫—Ä–∞—à–∏–≤–∞–µ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —à–æ—É–¥–∞—É–Ω–∞
    if (tie) {
        playerComboEl.classList.add("tie");
        botComboEl.classList.add("tie");
    } else if (playerWins) {
        playerComboEl.classList.add("win");
        botComboEl.classList.add("lose");
    } else {
        playerComboEl.classList.add("lose");
        botComboEl.classList.add("win");
    }

    playerComboEl.style.transition = "color 0.5s ease";
    botComboEl.style.transition = "color 0.5s ease";

    // –†–∞—Å—á—ë—Ç –≤—ã–ø–ª–∞—Ç
    let totalWin = 0;
    let messages = [];

    // PLAY —Å—Ç–∞–≤–∫–∞
    if (playerWins) {
        let playWin = currentPlayBet * 2; // –≤–æ–∑–≤—Ä–∞—Ç + 1:1
        totalWin += playWin;
        messages.push(`PLAY 1:1: ${playWin}`);
    }

    // ANTE
    let dealerQualified = true; // –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–∏–ª–µ—Ä–∞
    if (playerWins) {
        if (dealerQualified) {
            let anteWin = anteBet * 2;
            totalWin += anteWin;
            messages.push(`ANTE 1:1: ${anteWin}`);
        } else {
            totalWin += anteBet;
            messages.push(`ANTE –≤–æ–∑–≤—Ä–∞—Ç: ${anteBet}`);
        }
    }

    // BLIND (BB)
    const blindMultipliers = {
        "–°—Ç—Ä–∏—Ç":1,
        "–§–ª–µ—à":1.5,
        "–§—É–ª–ª-—Ö–∞—É—Å":3,
        "–ö–∞—Ä–µ":10,
        "–°—Ç—Ä–∏—Ç-—Ñ–ª–µ—à":50,
        "–†–æ—è–ª-—Ñ–ª–µ—à":500
    };
    if (playerWins && dealerQualified) {
        let mult = blindMultipliers[playerEval.name] || 0;
        if (mult > 0) {
            let blindWin = bbBet * (mult + 1); // –≤–æ–∑–≤—Ä–∞—Ç + –≤—ã–∏–≥—Ä—ã—à
            totalWin += blindWin;
            messages.push(`BLIND ${mult}: ${blindWin}`);
        } else {
            totalWin += bbBet;
            messages.push(`BLIND –ø—É—à`);
        }
    } else if (playerWins && !dealerQualified) {
        totalWin += bbBet;
        messages.push(`BLIND –ø—É—à (–¥–∏–ª–µ—Ä –Ω–µ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω)`);
    }

    // TRIPS (–≤—ã–ø–ª–∞—Ç–∞ –≤—Å–µ–≥–¥–∞)
    const tripsMultipliers = {
        "–°–µ—Ç":3,
        "–°—Ç—Ä–∏—Ç":5,
        "–§–ª–µ—à":7,
        "–§—É–ª–ª-—Ö–∞—É—Å":10,
        "–ö–∞—Ä–µ":25,
        "–°—Ç—Ä–∏—Ç-—Ñ–ª–µ—à":40,
        "–†–æ—è–ª-—Ñ–ª–µ—à":70
    };
    let tripsMult = tripsMultipliers[playerEval.name] || 0;
    if (tripsBet > 0 && tripsMult > 0) {
        let tripsWin = tripsBet * (tripsMult + 1);
        totalWin += tripsWin;
        messages.push(`TRIPS ${tripsMult}: ${tripsWin}`);
    }

    // ULTIMATE
    let ultMult = evaluateUltimate(player);
if (ultimateBet > 0 && ultMult > 0) {
    let ultWin = ultimateBet * ultMult; // —É–±—Ä–∞–ª–∏ +1
    totalWin += ultWin;
    messages.push(`ULTIMATE ${ultMult}: ${ultWin}`);
}

    // –ù–ò–ß–¨–Ø
    if (tie) {
        totalWin += bbBet + anteBet + currentPlayBet;
        messages.push("–ü–£–®");
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
    totalBalance += totalWin;
    updateBalance();

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å —Ü–≤–µ—Ç–æ–º
    const el = document.getElementById("playerWinText");
    el.style.transition = "color 0.5s ease";

    if (tie) {
        el.style.color = "#f39c12"; // –æ—Ä–∞–Ω–∂–µ–≤—ã–π
        el.innerText = `ü§ù –ù–∏—á—å—è | ${messages.join(" | ")}`;
    } else if (totalWin > 0) {
        el.style.color = "#28a745"; // –∑–µ–ª–µ–Ω—ã–π
        el.innerText = `üéâ –í—ã–ø–ª–∞—Ç–∞: ${totalWin} | ${messages.join(" | ")}`;
    } else {
        el.style.color = "#e53935"; // –∫—Ä–∞—Å–Ω—ã–π
        el.innerText = `üò¢ –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏`;
    }

    // –ö–Ω–æ–ø–∫–∞ –Ω–æ–≤–∞—è –∏–≥—Ä–∞
    const div = document.getElementById("actionButtons");
    div.innerHTML = "";
    const btnRestart = document.createElement("button");
    btnRestart.innerText = "–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É";
    btnRestart.onclick = () => {
        // –°–±—Ä–æ—Å –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –≤ –±–µ–ª—ã–π —Ü–≤–µ—Ç
        playerComboEl.style.color = "white";
        botComboEl.style.color = "white";
        playerComboEl.className = "";
        botComboEl.className = "";
        startPoker();
    };
    div.appendChild(btnRestart);
}

function evaluateUltimate(playerCards){
    const [c1,c2]=playerCards;
    const r1=c1.slice(0,-1), s1=c1.slice(-1);
    const r2=c2.slice(0,-1), s2=c2.slice(-1);

    // AA
    if(r1==="A"&&r2==="A") return 30;

    // KK, QQ, JJ
    if(r1===r2 && (r1==="K"||r1==="Q"||r1==="J")) return 15;

    // AK –æ–¥–Ω–æ–º–∞—Å—Ç–Ω—ã–µ
    if(((r1==="A"&&r2==="K")||(r1==="K"&&r2==="A")) && s1===s2) return 25;

    // AQ –æ–¥–Ω–æ–º–∞—Å—Ç–Ω—ã–µ
    if(((r1==="A"&&r2==="Q")||(r1==="Q"&&r2==="A")) && s1===s2) return 20;

    // AJ –æ–¥–Ω–æ–º–∞—Å—Ç–Ω—ã–µ
    if(((r1==="A"&&r2==="J")||(r1==="J"&&r2==="A")) && s1===s2) return 15;

    // AK —Ä–∞–∑–Ω–æ–º–∞—Å—Ç–Ω—ã–µ
    if((r1==="A"&&r2==="K")||(r1==="K"&&r2==="A")) return 10;

    // AQ —Ä–∞–∑–Ω–æ–º–∞—Å—Ç–Ω—ã–µ
    if((r1==="A"&&r2==="Q")||(r1==="Q"&&r2==="A")) return 5;

    // AJ —Ä–∞–∑–Ω–æ–º–∞—Å—Ç–Ω—ã–µ
    if((r1==="A"&&r2==="J")||(r1==="J"&&r2==="A")) return 2;

    return 0;
}

// ===== UTH SCRIPT END =====
</script>
</body>
</html>

</body>
</html>
